{% extends "layout.html" %}

{% block title %}
    Tracker Log
{% endblock %}

{% block main %}
    <h2 class="heading-space">Recent Journal Log</h2>
    <div class="entry-container">
        {% for entry in journal_entries %}
            <div class="entry-card">
                <h3>{{ entry['date'] }}</h3>
                <p><strong>Mood:</strong> {{ entry['mood'] }}</p>
                <p><strong>Stress:</strong> {{ entry['stress'] }}</p>
                <p><strong>Emotion:</strong> {{ entry['emotion'] }}</p>
                <p><strong>Reflection:</strong> {{ entry['self_reflection'] }}</p>
                <p><strong>Thoughts:</strong> {{ entry['content'] }}</p>
            </div>
        {% endfor %}
    </div>
    <h2 class="heading-space"></h2>
    <canvas id="moodRadarChart"></canvas>
    <h2 class="heading-space">Current Goals</h2>
        {% if goal_entries %}
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Goal</th>
                        <th>Category</th>
                        <th>Description</th>
                        <th>Due Date</th>
                        <th>Priority</th>
                    </tr>
                </thead>
                {% for goal in goal_entries %}
                    <tr>
                        <td>{{ goal['goal_title'] }}</td>
                        <td>{{ goal['category'] }}</td>
                        <td>{{ goal['description'] }}</td>
                        <td>{{ goal['due_date'] }}</td>
                        <td>{{ goal['priority'] }}</td>
                    </tr>
                {% endfor %}
            </table>
        {% endif %}
    <script>
        window.chartData = {
            dates: {{ dates | tojson | safe }},
            moodValue: {{ mood_val | tojson | safe }},
            sleepValue: {{ sleep_val | tojson | safe }},
            dietValue: {{ diet_val | tojson | safe }},
            energyValue: {{ energy_val | tojson | safe }},
            stressValue: {{ stress_val | tojson | safe }}
        }; 
    </script>
{% endblock %}